
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Deployment · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-expandable-chapters/expandable-chapters-theme.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-copy/css/copy.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="running-5.html" />
    
    
    <link rel="prev" href="principle-3.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="overview.html">
            
                <a href="overview.html">
            
                    
                    Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="environment-preparation.html">
            
                <a href="environment-preparation.html">
            
                    
                    Environment Preparation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="prerequisites.html">
            
                <a href="prerequisites.html">
            
                    
                    Prerequisites
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="software-preparation.html">
            
                <a href="software-preparation.html">
            
                    
                    Software Preparation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="face-detection-sample.html">
            
                <a href="face-detection-sample.html">
            
                    
                    Face Detection Sample
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="ascendcamera.html">
            
                <a href="ascendcamera.html">
            
                    
                    Ascendcamera
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="principle.html">
            
                <a href="principle.html">
            
                    
                    Principle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="deployment.html">
            
                <a href="deployment.html">
            
                    
                    Deployment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="running.html">
            
                <a href="running.html">
            
                    
                    Running
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.3.1" data-path="saving-media-information-offline.html">
            
                <a href="saving-media-information-offline.html">
            
                    
                    Saving Media Information Offline
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.2" data-path="viewing-media-information-in-real-time.html">
            
                <a href="viewing-media-information-in-real-time.html">
            
                    
                    Viewing Media Information in Real Time
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.3.2.1" data-path="playing-a-real-time-video-through-presenter-server.html">
            
                <a href="playing-a-real-time-video-through-presenter-server.html">
            
                    
                    Playing a Real-Time Video Through Presenter Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.2.2" data-path="playing-a-real-time-video-through-vlc.html">
            
                <a href="playing-a-real-time-video-through-vlc.html">
            
                    
                    Playing a Real-Time Video Through VLC
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="facial-recognition-sample.html">
            
                <a href="facial-recognition-sample.html">
            
                    
                    Facial Recognition Sample
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="principle-0.html">
            
                <a href="principle-0.html">
            
                    
                    Principle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="deployment-1.html">
            
                <a href="deployment-1.html">
            
                    
                    Deployment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="running-2.html">
            
                <a href="running-2.html">
            
                    
                    Running
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="video-analysis-sample.html">
            
                <a href="video-analysis-sample.html">
            
                    
                    Video Analysis Sample
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="principle-3.html">
            
                <a href="principle-3.html">
            
                    
                    Principle
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.7.2" data-path="deployment-4.html">
            
                <a href="deployment-4.html">
            
                    
                    Deployment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="running-5.html">
            
                <a href="running-5.html">
            
                    
                    Running
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="network-connectivity.html">
            
                <a href="network-connectivity.html">
            
                    
                    Network Connectivity
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="principle-6.html">
            
                <a href="principle-6.html">
            
                    
                    Principle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="deployment-7.html">
            
                <a href="deployment-7.html">
            
                    
                    Deployment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="running-8.html">
            
                <a href="running-8.html">
            
                    
                    Running
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="（advanced）-source-code-analysis-for-common-modules.html">
            
                <a href="（advanced）-source-code-analysis-for-common-modules.html">
            
                    
                    （Advanced） Source Code Analysis for Common Modules
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="presenter.html">
            
                <a href="presenter.html">
            
                    
                    Presenter
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1.1" data-path="presenter-server.html">
            
                <a href="presenter-server.html">
            
                    
                    Presenter Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.1.2" data-path="presenter-agent.html">
            
                <a href="presenter-agent.html">
            
                    
                    Presenter Agent
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="ezdvpp.html">
            
                <a href="ezdvpp.html">
            
                    
                    EZDVPP
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="appendix.html">
            
                <a href="appendix.html">
            
                    
                    Appendix
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="downloading-network-models.html">
            
                <a href="downloading-network-models.html">
            
                    
                    Downloading Network Models
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="viewing-the-channel-to-which-a-camera-belongs.html">
            
                <a href="viewing-the-channel-to-which-a-camera-belongs.html">
            
                    
                    Viewing the Channel to Which a Camera Belongs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="how-do-i-upload-files-to-the-host.html">
            
                <a href="how-do-i-upload-files-to-the-host.html">
            
                    
                    How Do I Upload Files to the Host?
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="disclaimer.html">
            
                <a href="disclaimer.html">
            
                    
                    Disclaimer
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Deployment</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="deployment">Deployment<a id="EN-US_TOPIC_0167289920"></a></h1>
<ol>
<li>Prepare the environment by referring to  <a href="environment-preparation.html">Environment Preparation</a>.</li>
<li><p><a id="li206239341242"></a>If the Ubuntu system where Mind Studio is located is not connected to the network, prepare the model files by referring to this step. If the Ubuntu system where Mind Studio is located is connected to the network, the deployment script automatically downloads the model files, and you can ignore this operation.</p>
<p>Download the following model files used by the video structured analysis application by referring to  <a href="downloading-network-models.html">Downloading Network Models</a>  and save the .om files to the root directory of the video analysis application code, for example,  <strong><em>/home/ascend/ascenddk/smartcity/videoanalysis</em></strong>. If the Ubuntu system where Mind Studio is located is connected to the network, the deployment script automatically downloads the model files, and you can ignore this operation.</p>
<ul>
<li><strong>car_color.om</strong>: vehicle color recognition model</li>
<li><strong>car_type.om</strong>: vehicle brand recognition model</li>
<li><strong>vgg_ssd.om</strong>: object detection model</li>
<li><strong>pedestrian.om</strong>: human body feature inference model</li>
<li><strong>car_plate_detection.om</strong>: license plate detection model</li>
<li><strong>car_plate_recognition.om</strong>: license plate recognition model</li>
<li><strong>face_detection.om</strong>: face detection model</li>
<li><strong>inception_age.om</strong>: age identification model</li>
<li><strong>inception_gender.om</strong>: gender identification model</li>
</ul>
</li>
<li><p><a id="li1136643333513"></a>If the Ubuntu system where Mind Studio is located is not connected to the network, prepare the open source tool FFmpeg by referring to this step. If the Ubuntu system where Mind Studio is located is connected to the network, the deployment script automatically downloads the FFmpeg code, and you can ignore this operation.</p>
<p>The current application uses FFmpeg to decapsulate video files. Before using this tool, you need to download the code package of the ffmpeg 4.0 branch to the root directory of the video analysis application code as the Mind Studio installation user on the server where Mind Studio is located. The directory name after decompression is  <strong>ffmpeg</strong>, for example,  <strong><em>/home/ascend/ascenddk/smartcity/videoanalysis</em></strong><em><strong>/ffmpeg</strong></em>.</p>
<blockquote>
<p><img src="public_sys-resources/icon-note.gif" alt=""> <strong>NOTE:</strong><br>The URL for downloading the FFmpeg 4.0 code is  <a href="https://github.com/FFmpeg/FFmpeg/tree/release/4.0" target="_blank">https://github.com/FFmpeg/FFmpeg/tree/release/4.0</a>.  </p>
</blockquote>
</li>
<li><p>Access the root directory where the video analysis application code is located as the Mind Studio installation user, for example,  <strong><em>/home/ascend/ascenddk/smartcity/videoanalysis</em></strong>.</p>
</li>
<li><p><a id="li08019112542"></a>Run the deployment script to prepare the project environment, including compiling and deploying the ascenddk public library, downloading the network model, and configuring Presenter Server.</p>
<p><strong>bash deploy.sh</strong><em>host_ip</em> <em>model_mode</em></p>
<ul>
<li><p><em>host_ip</em>: For the Atlas 200 DK developer board, this parameter indicates the IP address of the developer board.For the AI acceleration cloud server, this parameter indicates the IP address of the host.</p>
</li>
<li><p><em>model_mode</em>  indicates the deployment mode of the model file. The value can be  <strong>local</strong>  or<strong> internet</strong>. The default setting is  <strong>internet</strong>.</p>
<ul>
<li><strong>local</strong>: Indicates the local deployment mode. If the Ubuntu system where Mind Studio is located is not connected to the network, use the local mode. In this case, you need to have downloaded the model file and FFmpeg by referring to  <a href="#li206239341242">2</a>  and  <a href="#li1136643333513">3</a>.</li>
<li><strong>internet</strong>: Indicates the online deployment mode. If the Ubuntu system where Mind Studio is located is connected to the network, use the Internet mode. In this case, download the model file online.</li>
</ul>
</li>
</ul>
<p>Example command:</p>
<p><strong>bash deploy.sh 192.168.1.2 internet</strong></p>
<ul>
<li>When the message  <strong>Please choose one to show the presenter in browser&#xFF08;default: 127.0.0.1&#xFF09;:</strong>  is displayed, enter the IP address used for accessing the Presenter Server service in the browser. Generally, the IP address is the IP address for accessing the Mind Studio service.</li>
<li>When the message  <strong>Please input a absolute path to storage video analysis data:</strong>  is displayed, enter the existing absolute path for storing video analysis data in Mind Studio. The Mind Studio user must have the read and write permissions.</li>
</ul>
<p>Select the IP address used by the browser to access the Presenter Server service in  <strong>Current environment valid ip list</strong>  and enter the path for storing video analysis data, as shown in  <a href="#fig184321447181017">Figure 1</a>.</p>
<p><strong>Figure  1</strong>  Project deployment<a id="fig184321447181017"></a><br><img src="figures/project-deployment-7.png" alt="" title="project-deployment-7"></p>
</li>
<li><p>Start Presenter Server.</p>
<p>Run the following command to start the Presenter Server program of the video analysis application in the background:</p>
<p><strong>python3 ../../common/presenter/server/presenter_server.py --app video_analysis &amp;</strong></p>
<blockquote>
<p><img src="public_sys-resources/icon-note.gif" alt=""> <strong>NOTE:</strong><br><strong>presenter_server.py</strong>  is located in the  <strong>/ascenddk/common/presenter/server</strong>  directory &#xFF08;for example,  <strong>/home/ascend/ascenddk/common/presenter/server</strong>&#xFF09;. You can run the  <strong>python3 presenter_server.py -h</strong>  or  <strong>python3 presenter_server.py--help</strong>  command in this directory to view the usage method of  <strong>presenter_server.py</strong>.  </p>
</blockquote>
<p><a href="#fig69531305324">Figure 2</a>  shows that the presenter_server service is started successfully.</p>
<p><strong>Figure  2</strong>  Starting the Presenter Server process<a id="fig69531305324"></a><br><img src="figures/starting-the-presenter-server-process-8.png" alt="" title="starting-the-presenter-server-process-8"></p>
<p>Use the URL shown in the preceding figure to log in to Presenter Server &#xFF08;only the Chrome browser is supported&#xFF09;. The IP address is that entered in  <a href="#li08019112542">5</a>  and the default port number is  <strong>7005</strong>. The following figure indicates that Presenter Server is started successfully.</p>
<p><strong>Figure  3</strong>  Home page<a id="fig64391558352"></a><br><img src="figures/home-page-9.png" alt="" title="home-page-9"></p>
</li>
<li><p>The video structured application can parse local videos and RTSP video streams.</p>
<ul>
<li><p>To parse a local video, upload the video file to the Host.</p>
<p>For example, upload the video file  <strong>car.mp4</strong>  to the  <strong>/home/HwHiAiUser/sample</strong>  directory on the host.</p>
<p>For details, see  <a href="how-do-i-upload-files-to-the-host.html">How Do I Upload Files to the Host?</a>.</p>
<blockquote>
<p><img src="public_sys-resources/icon-note.gif" alt=""> <strong>NOTE:</strong><br>H.264 and H.265 MP4 files are supported. If an MP4 file needs to be edited, you are advised to use FFmpeg. If a video file is edited by other tools, FFmpeg may fail to parse the file.  </p>
</blockquote>
</li>
<li><p>If only RTSP video streams need to be parsed, skip this step.</p>
</li>
</ul>
</li>
</ol>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="principle-3.html" class="navigation navigation-prev " aria-label="Previous page: Principle">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="running-5.html" class="navigation navigation-next " aria-label="Next page: Running">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Deployment","level":"1.7.2","depth":2,"next":{"title":"Running","level":"1.7.3","depth":2,"path":"running-5.md","ref":"running-5.md","articles":[]},"previous":{"title":"Principle","level":"1.7.1","depth":2,"path":"principle-3.md","ref":"principle-3.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{"imgUrl":"","topnav":[]},"plugins":["expandable-chapters","copy"],"pluginsConfig":{"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"copy":{},"expandableChapters":{"cssFile":["expandable-chapters-theme.css"]},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"expandable-chapters":{}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"website.css"}},"file":{"path":"deployment-4.md","mtime":"2019-04-26T08:02:03.844Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-04-26T08:02:12.360Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-copy/js/clipboard.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-copy/js/copy.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

